<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myanmar Income Tax Calculator (Monthly Adjustments)</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>

    <div class="container">
        <h1>Myanmar Income Tax Calculator (Monthly Adjustments)</h1>

        <!-- Monthly Salary Inputs (April to March) -->
        <h2>Enter Salary for Each Month:</h2>
        <div id="monthly-salary-inputs"></div>

        <!-- Spouse -->
        <label for="spouse">Spouse (Yes/No):</label>
        <select id="spouse">
            <option value="0">No</option>
            <option value="1000000">Yes</option>
        </select>

        <!-- Number of Children -->
        <label for="children">Number of Children:</label>
        <input type="number" id="children" placeholder="Enter number of children" min="0">

        <!-- Number of Parents -->
        <label for="parents">Number of Parents (Living with you):</label>
        <input type="number" id="parents" placeholder="Enter number of parents" min="0">

        <!-- SSB & Insurance (Monthly) -->
        <label for="ssb">Monthly SSB & Insurance Deduction (MMK):</label>
        <input type="number" id="ssb" placeholder="Enter SSB amount" min="0">

        <!-- Calculate Button -->
        <button onclick="calculateTax()">Calculate Tax</button>

        <!-- Result -->
        <h2>Tax Calculation Result</h2>
        <div id="result">Your tax amount will be displayed here.</div>

        <!-- Back to Home -->
        <a href="../index.html" class="back-btn">Back to Home</a>
    </div>

    <script>
        // Generate monthly salary fields for April to March
        const months = [
            "April", "May", "June", "July", "August", "September",
            "October", "November", "December", "January", "February", "March"
        ];

        const container = document.getElementById('monthly-salary-inputs');

        months.forEach((month, index) => {
            const input = document.createElement('div');
            input.innerHTML = `
                <label for="month-${index + 1}">${month} (MMK):</label>
                <input type="number" id="month-${index + 1}" placeholder="Enter salary" min="0">
            `;
            container.appendChild(input);
        });

        function calculateTax() {
            // Collect salary for each month (April to March)
            let monthlyIncomes = [];
            for (let i = 1; i <= 12; i++) {
                let salary = parseFloat(document.getElementById(`month-${i}`).value) || 0;
                monthlyIncomes.push(salary);
            }

            // Input values for allowances
            let spouseAllowance = parseFloat(document.getElementById('spouse').value);
            let children = parseInt(document.getElementById('children').value) || 0;
            let parents = parseInt(document.getElementById('parents').value) || 0;
            let ssb = parseFloat(document.getElementById('ssb').value) || 0;

            // Calculate annual salary and SSB
            let annualIncome = monthlyIncomes.reduce((a, b) => a + b, 0);
            let annualSSB = ssb * 12;

            // Allowances Calculation
            let childAllowance = children * 500000;
            let parentAllowance = parents * 1000000;

            let totalAllowances = spouseAllowance + childAllowance + parentAllowance + annualSSB;

            // Taxable Income Calculation (Annual Basis)
            let taxableIncome = Math.max(annualIncome - totalAllowances, 0);

            // Tax Calculation (Myanmar Annual Tax Brackets)
            let tax = 0;
            if (taxableIncome > 4800000) {
                let taxable = taxableIncome - 4800000;

                if (taxable <= 2000000) {
                    tax += taxable * 0;
                } else if (taxable <= 10000000) {
                    tax += (Math.min(taxable, 10000000) - 2000000) * 0.05;
                } else if (taxable <= 30000000) {
                    tax += (Math.min(taxable, 30000000) - 10000000) * 0.10 + 400000;
                } else if (taxable <= 50000000) {
                    tax += (Math.min(taxable, 50000000) - 30000000) * 0.15 + 2400000;
                } else if (taxable <= 70000000) {
                    tax += (Math.min(taxable, 70000000) - 50000000) * 0.20 + 5400000;
                } else {
                    tax += (taxable - 70000000) * 0.25 + 9400000;
                }
            }

            // Monthly Tax Calculation
            let monthlyTax = tax / 12;

            // Display Result
            document.getElementById('result').innerHTML = `
                <p><strong>Total Annual Salary:</strong> ${annualIncome.toLocaleString()} MMK</p>
                <p><strong>Total Allowances:</strong> ${totalAllowances.toLocaleString()} MMK</p>
                <p><strong>Taxable Income:</strong> ${taxableIncome.toLocaleString()} MMK</p>
                <p><strong>Annual Tax:</strong> ${tax.toLocaleString()} MMK</p>
                <p><strong>Monthly Tax (Approx):</strong> ${monthlyTax.toLocaleString()} MMK</p>
            `;
        }
    </script>

</body>

</html>
